set(SPIRV_TARGET_V 6_8)

set(COMMON_OPTIONS
	-I "${COMMON_INCLUDE_DIRECTORY}"
)

set(OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/auto-gen" )
file(WRITE "${OUTPUT_DIRECTORY}/dummy.txt" "dummy, test")

NBL_REGISTER_BUILD_MOUNT_POINT(
    ARCHIVE
        TARGET NblExtExamplesAPIBuiltinsSPIRV
        INPUT_DIRECTORY .
		OUTPUT_DIRECTORY "${OUTPUT_DIRECTORY}"
        NAMESPACE nbl::builtin::examples::build
		MOUNT_POINT_DEFINE NBL_EXAMPLES_BUILD_MOUNT_POINT
	
	# relative to ARCHIVE.OUTPUT_DIRECTORY
	BUILTINS
		dummy.txt

	SHADERS
		KEY shaders/geometry/unified.hlsl COMPILE_OPTIONS ${COMMON_OPTIONS} -T lib_${SPIRV_TARGET_V}
		# KEY <xyz> COMPILE_OPTIONS ${COMMON_OPTIONS} -T <target>_${SPIRV_TARGET_V}
)

if(NBL_EMBED_BUILTIN_RESOURCES)
	INTERFACE_TO_BUILTINS(NblExtExamplesAPIBuiltinsSPIRV)
endif()